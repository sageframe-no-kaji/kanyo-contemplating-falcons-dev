# Kanyo Configuration Template
#
# TIMING CONSTRAINTS (enforced at load):
#   roosting_threshold > exit_timeout
#
# Thumbnail Image (for viewer landing page):
#   Place thumbnail at: /opt/services/kanyo-viewer/frontend/public/thumbnails/<stream-id>.jpg
#   Recommended: 1280×720 (16:9), JPG format, under 500KB
#   Min: 640×360, Max: 1920×1080
#   Fallback: viewer will use most recent arrival snapshot from clips

# ─────────────────────────────────────────────────────────────────────────────
# Stream Identity (for Admin GUI)
# ─────────────────────────────────────────────────────────────────────────────
stream_name: "My Falcon Cam"       # Display name in admin UI

video_source: "https://youtube.com/watch?v=YOUR_STREAM_ID"

# Detection
detection_confidence: 0.3      # 0.0-1.0 (required)
detection_confidence_ir: 0.25  # IR/night mode threshold (optional, lower for grayscale)
frame_interval: 3              # >= 1 (required)
model_path: "models/yolov8n.pt"
detect_any_animal: true
timezone: "UTC"                # IANA timezone name (e.g., "Australia/Sydney", "America/New_York")

# State machine configuration
exit_timeout: 90               # Seconds absent before departure (same for all states)
roosting_threshold: 1800       # 30 min - transition to roosting (notification only)

# Arrival confirmation (prevent false positives)
arrival_confirmation_seconds: 10   # Seconds to confirm arrival
arrival_confirmation_ratio: 0.3    # 30% of frames must detect

# Notifications
notify_on_startup: false       # Send notification if bird detected at startup
record_arrival_on_startup: false  # Record arrival clip on startup (visit always records for departure)

# Clip Extraction
clips_dir: "clips"
clip_arrival_before: 15
clip_arrival_after: 30
clip_departure_before: 30
clip_departure_after: 15
short_visit_threshold: 600     # >= 60s required

# Notifications
telegram_enabled: false
telegram_channel: ""
notification_cooldown_minutes: 5

# Display Metadata (for public viewer site)
display:
  short_name: "My Cam"                    # Brief name for stream cards
  location: "City, State/Country"          # Full location description
  coordinates: [0.0, 0.0]                  # [latitude, longitude]
  species: "Peregrine Falcon (Falco peregrinus)"
  nest_status: "Active nesting site"      # Current status description
  maintainer: "Organization Name"          # Who maintains the camera
  maintainer_url: "https://example.com"    # Optional website link
  description: "Brief description of the camera location and purpose for public viewers."

# Logging
log_level: "DEBUG"        # DEBUG, INFO, WARNING, ERROR
log_file: "logs/kanyo.log"
